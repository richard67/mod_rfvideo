if(!Joomla)throw new Error("Joomla API was not properly initialized");function sourceSelectChanged(e,t,s,a,n,r,i,l,o){const d=r.currentSrc.substr(r.currentSrc.lastIndexOf("."));""!==d&&(r.pause(),t.style=`max-width: ${i[e.options.selectedIndex].totalwmax};`,s.style.flex=`0 1 ${i[e.options.selectedIndex].width}px`,a.style.flex=`1 1 ${o}px`,a.style.maxWidth=`${i[e.options.selectedIndex].width}px`,n.style.flex=`1 1 ${l}px`,n.style.maxHeight=`${i[e.options.selectedIndex].height}px`,r.width=i[e.options.selectedIndex].width,r.height=i[e.options.selectedIndex].height,r.poster=`/${i[e.options.selectedIndex].image}`,i[e.options.selectedIndex].sources.every((e=>e.substr(e.lastIndexOf("."))!==d||(r.src=`/${e}`,!1))),e.setAttribute("data-selected",e.options.selectedIndex),r.load())}function seek(e,t){e.currentTime=t.toFixed(1),e.play()}function updchapter(e,t,s,a){if(e.seeking)t.innerHTML=a;else if(e.currentTime<=0)t.innerHTML="";else{let a="",n=s.length-1;for(;n>=0;){if(e.currentTime>=s[n].start){a=s[n].title;break}n-=1}t.innerHTML=a}}function setstatus(e,t){e.innerHTML=t}function clearstatus(e,t){e.innerHTML===t&&(e.innerHTML="")}const allVideoPlayerWrappers=document.querySelectorAll("div.rfvideoplayerwrapper");allVideoPlayerWrappers.forEach((e=>{const t=e.querySelector(".rfvideoplayer"),s=e.querySelector(".rfvideo"),a=e.querySelector(".rfvideoplaylistwrapper"),n=e.querySelector(".rfvideoplaylist"),r=parseInt(n.getAttribute("data-min-height"),10),i=parseInt(n.getAttribute("data-min-width"),10),l=e.getElementsByTagName("select")[0],o=e.getElementsByTagName("video")[0],d=e.querySelector(".rfvideostatus"),c=!!d&&!!d.getAttribute("data-show-status"),u=!!d&&!!d.getAttribute("data-show-title"),p=e.getElementsByTagName("li");let g="";if(c){const e=Joomla.Text._("MOD_RFVIDEO_LOADING").replace("&hellip;","…");g=Joomla.Text._("MOD_RFVIDEO_SEEKING").replace("&hellip;","…"),o.addEventListener("loadstart",(()=>{2===o.networkState&&setstatus(d,e)})),o.addEventListener("waiting",(()=>{2===o.networkState&&setstatus(d,e)})),o.addEventListener("canplay",(()=>{clearstatus(d,e)})),o.addEventListener("playing",(()=>{clearstatus(d,e)})),o.addEventListener("seeking",(()=>{setstatus(d,g)})),o.addEventListener("seeked",(()=>{clearstatus(d,g)}))}if(u){const e=[];for(let t=0;t<p.length;t+=1){const s=p[t].getElementsByTagName("button")[0],a={start:parseFloat(s.getAttribute("data-start")),title:s.innerHTML};e[t]=a,s.addEventListener("click",(()=>{seek(o,a.start)}))}e[p.length]={start:o.duration,title:""},o.addEventListener("durationchange",(()=>{e[p.length].start=o.duration})),o.addEventListener("timeupdate",(()=>{updchapter(o,d,e,g)}))}else for(let e=0;e<p.length;e+=1){const t=p[e].getElementsByTagName("button")[0];t.addEventListener("click",(()=>{seek(o,parseFloat(t.getAttribute("data-start")))}))}if(l){const e=[];l.value=l.options[0].value;for(let t=0;t<l.length;t+=1){const s=l.options[t].value.split(";"),a={height:s[0],width:s[1],totalwmax:s[2],image:s[3],sources:s.slice(4)};e[t]=a}l.addEventListener("change",(()=>{sourceSelectChanged(l,t,s,a,n,o,e,r,i)}))}}));