if(!Joomla)throw new Error("Joomla API was not properly initialized");function sourceSelectChanged(e,t,s,a,i){const n=a.currentSrc.substr(a.currentSrc.lastIndexOf("."));if(""===n)return;a.pause();const r=i[e.getAttribute("data-selected")].suffix,l=i[e.options.selectedIndex].suffix;t.classList.remove(`rfvideo${r}`),s.classList.remove(`rfvideoplaylist${r}`),t.classList.add(`rfvideo${l}`),s.classList.add(`rfvideoplaylist${l}`),a.width=i[e.options.selectedIndex].width,a.height=i[e.options.selectedIndex].height,a.poster=`/${i[e.options.selectedIndex].image}`,i[e.options.selectedIndex].sources.every((e=>e.substr(e.lastIndexOf("."))!==n||(a.src=`/${e}`,!1))),e.setAttribute("data-selected",e.options.selectedIndex),a.load()}function seek(e,t){e.currentTime=t.toFixed(1),e.play()}function setstatus(e,t){e.innerHTML=t}function clearstatus(e,t){e.innerHTML===t&&(e.innerHTML="")}const allVideoPlayerDivs=document.querySelectorAll("div.rfvideoplayer");allVideoPlayerDivs.forEach((e=>{const t=e.querySelector(".rfvideo"),s=e.querySelector(".rfvideoplaylist"),a=e.getElementsByTagName("select")[0],i=e.getElementsByTagName("video")[0],n=e.querySelector(".rfvideostatus"),r=e.getElementsByTagName("li"),l=Joomla.Text._("MOD_RFVIDEO_LOADING").replace("&hellip;","…"),o=Joomla.Text._("MOD_RFVIDEO_SEEKING").replace("&hellip;","…");for(let e=0;e<r.length;e+=1){const t=r[e].getElementsByTagName("a")[0];t.addEventListener("click",(()=>{seek(i,parseFloat(t.getAttribute("data-start")))}))}if(a){const e=[];for(let t=0;t<a.length;t+=1){const s=a.options[t].value.split(";"),i={suffix:s[0],height:s[1],width:s[2],image:s[3],sources:s.slice(4)};e[t]=i}a.addEventListener("change",(()=>{sourceSelectChanged(a,t,s,i,e)}))}i.addEventListener("loadstart",(()=>{2===i.networkState&&setstatus(n,l)})),i.addEventListener("waiting",(()=>{2===i.networkState&&setstatus(n,l)})),i.addEventListener("canplay",(()=>{clearstatus(n,l)})),i.addEventListener("playing",(()=>{clearstatus(n,l)})),i.addEventListener("seeking",(()=>{setstatus(n,o)})),i.addEventListener("seeked",(()=>{clearstatus(n,o)}))}));