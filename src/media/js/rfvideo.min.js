if(!Joomla)throw new Error("Joomla API was not properly initialized");function sourceSelectChanged(e,t,s,n,i){const a=n.currentSrc.substr(n.currentSrc.lastIndexOf("."));if(""===a)return;n.pause();let o=i[e.getAttribute("data-selected")].suffix,r=i[e.options.selectedIndex].suffix;t.classList.remove("rfvideo"+o),s.classList.remove("rfvideoplaylist"+o),t.classList.add("rfvideo"+r),s.classList.add("rfvideoplaylist"+r),n.width=i[e.options.selectedIndex].width,n.height=i[e.options.selectedIndex].height,n.poster="/"+i[e.options.selectedIndex].image,i[e.options.selectedIndex].sources.forEach((e=>{if(e.substr(e.lastIndexOf("."))===a)return n.src="/"+e,!1})),e.setAttribute("data-selected",e.options.selectedIndex),n.load()}function seek(e,t){e.currentTime=t.toFixed(1),e.play()}function setstatus(e,t){e.innerHTML=t}function clearstatus(e,t){e.innerHTML===t&&(e.innerHTML="")}const allVideoPlayerDivs=document.querySelectorAll("div.rfvideoplayer");allVideoPlayerDivs.forEach((e=>{const t=e.querySelector(".rfvideo"),s=e.querySelector(".rfvideoplaylist"),n=e.getElementsByTagName("select")[0],i=e.getElementsByTagName("video")[0],a=e.querySelector(".rfvideostatus"),o=e.getElementsByTagName("li"),r=Joomla.Text._("MOD_RFVIDEO_LOADING").replace("&hellip;","…"),l=Joomla.Text._("MOD_RFVIDEO_SEEKING").replace("&hellip;","…");for(let e=0;e<o.length;++e){const t=o[e].getElementsByTagName("a")[0];t.addEventListener("click",(function(){seek(i,parseFloat(t.getAttribute("data-start")))}))}if(n){let e=[];for(let t=0;t<n.length;++t){const s=n.options[t].value.split(";");let i={suffix:s[0],height:s[1],width:s[2],image:s[3],sources:s.slice(4)};e[t]=i}n.addEventListener("change",(function(){sourceSelectChanged(n,t,s,i,e)}))}i.addEventListener("loadstart",(function(){2===i.networkState&&setstatus(a,r)})),i.addEventListener("waiting",(function(){2===i.networkState&&setstatus(a,r)})),i.addEventListener("canplay",(function(){clearstatus(a,r)})),i.addEventListener("playing",(function(){clearstatus(a,r)})),i.addEventListener("seeking",(function(){setstatus(a,l)})),i.addEventListener("seeked",(function(){clearstatus(a,l)}))}));