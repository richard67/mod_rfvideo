if(!Joomla)throw new Error("Joomla API was not properly initialized");function sourceSelectChanged(e,t,s,a,r,i,n){const l=i.currentSrc.substr(i.currentSrc.lastIndexOf(".")),o=parseInt(e.getAttribute("data-selected"),10);""===l||Number.isNaN(o)||(i.pause(),n[e.options.selectedIndex].sources.every((d=>d.substr(d.lastIndexOf("."))!==l||(t.classList.remove(`rfvideoquality${o}`),s.classList.remove(`rfvideoquality${o}`),a.classList.remove(`rfvideoquality${o}`),r.classList.remove(`rfvideoquality${o}`),i.poster=`/${n[e.options.selectedIndex].image}`,i.src=`/${d}`,t.classList.add(`rfvideoquality${e.options.selectedIndex}`),s.classList.add(`rfvideoquality${e.options.selectedIndex}`),a.classList.add(`rfvideoquality${e.options.selectedIndex}`),r.classList.add(`rfvideoquality${e.options.selectedIndex}`),e.setAttribute("data-selected",e.options.selectedIndex),i.load(),!1))))}function seek(e,t){e.currentTime=t,e.play()}function updchapter(e,t,s,a){if(e.seeking)t.innerHTML=a;else if(e.currentTime<=0)t.innerHTML="";else{let a="",r=s.length-1;for(;r>=0;){if(e.currentTime>=s[r].start){a=s[r].title;break}r-=1}t.innerHTML=a}}function setstatus(e,t){e.innerHTML=t}function clearstatus(e,t){e.innerHTML===t&&(e.innerHTML="")}const allVideoPlayerWrappers=document.querySelectorAll("div.rfvideoplayerwrapper");allVideoPlayerWrappers.forEach((e=>{const t=e.querySelector(".rfvideoplayer"),s=e.querySelector(".rfvideo"),a=e.querySelector(".rfvideoplaylistwrapper"),r=e.querySelector(".rfvideoplaylist"),i=e.getElementsByTagName("select")[0],n=e.getElementsByTagName("video")[0],l=e.querySelector(".rfvideostatus"),o=!!l&&!!l.getAttribute("data-show-status"),d=!!l&&!!l.getAttribute("data-show-title"),c=e.getElementsByTagName("li");let u="";if(o){const e=Joomla.Text._("MOD_RFVIDEO_LOADING").replace("&hellip;","…");u=Joomla.Text._("MOD_RFVIDEO_SEEKING").replace("&hellip;","…"),n.addEventListener("loadstart",(()=>{2===n.networkState&&setstatus(l,e)})),n.addEventListener("waiting",(()=>{2===n.networkState&&setstatus(l,e)})),n.addEventListener("canplay",(()=>{clearstatus(l,e)})),n.addEventListener("playing",(()=>{clearstatus(l,e)})),n.addEventListener("seeking",(()=>{setstatus(l,u)})),n.addEventListener("seeked",(()=>{clearstatus(l,u)}))}if(d){const e=[];for(let t=0;t<c.length;t+=1){const s=c[t].getElementsByTagName("button")[0],a={start:parseFloat(s.getAttribute("data-start")).toFixed(1),title:s.innerHTML};e[t]=a,s.addEventListener("click",(()=>{seek(n,a.start)}))}e[c.length]={start:n.duration,title:""},n.addEventListener("durationchange",(()=>{e[c.length].start=n.duration})),n.addEventListener("timeupdate",(()=>{updchapter(n,l,e,u)}))}else for(let e=0;e<c.length;e+=1){const t=c[e].getElementsByTagName("button")[0];t.addEventListener("click",(()=>{seek(n,parseFloat(t.getAttribute("data-start")).toFixed(1))}))}if(i){const e=[];i.value=i.options[0].value;for(let t=0;t<i.length;t+=1){const s=i.options[t].value.split(";"),a={image:s[0],sources:s.slice(1)};e[t]=a}i.addEventListener("change",(()=>{sourceSelectChanged(i,t,s,a,r,n,e)}))}}));