if(!Joomla)throw new Error("Joomla API was not properly initialized");function sourceSelectChanged(e,t,s,a,n,i,r,l,o){const d=i.currentSrc.substr(i.currentSrc.lastIndexOf("."));""!==d&&(i.pause(),t.style=`max-width: ${r[e.options.selectedIndex].totalwmax}; max-height: ${r[e.options.selectedIndex].totalhmax};`,s.style=`max-width: ${r[e.options.selectedIndex].width}px; max-height: ${r[e.options.selectedIndex].height}px`,a.style.flex=`1 1 ${o}px`,a.style.minWidth=`${r[e.options.selectedIndex].plistwmin}`,a.style.maxWidth=`${r[e.options.selectedIndex].width}px`,n.style.flex=`1 1 ${l}px`,n.style.maxHeight=`${r[e.options.selectedIndex].height}px`,i.width=r[e.options.selectedIndex].width,i.height=r[e.options.selectedIndex].height,i.poster=`/${r[e.options.selectedIndex].image}`,r[e.options.selectedIndex].sources.every((e=>e.substr(e.lastIndexOf("."))!==d||(i.src=`/${e}`,!1))),e.setAttribute("data-selected",e.options.selectedIndex),i.load())}function seek(e,t){e.currentTime=t.toFixed(1),e.play()}function updchapter(e,t,s,a){if(e.seeking)t.innerHTML=a;else if(e.currentTime<=0)t.innerHTML="";else{let a="",n=s.length-1;for(;n>=0;){if(e.currentTime>=s[n].start){a=s[n].title;break}n-=1}t.innerHTML=a}}function setstatus(e,t){e.innerHTML=t}function clearstatus(e,t){e.innerHTML===t&&(e.innerHTML="")}const allVideoPlayerWrappers=document.querySelectorAll("div.rfvideoplayerwrapper");allVideoPlayerWrappers.forEach((e=>{const t=e.querySelector(".rfvideoplayer"),s=e.querySelector(".rfvideo"),a=e.querySelector(".rfvideoplaylistwrapper"),n=e.querySelector(".rfvideoplaylist"),i=parseInt(n.getAttribute("data-min-height"),10),r=parseInt(n.getAttribute("data-min-width"),10),l=e.getElementsByTagName("select")[0],o=e.getElementsByTagName("video")[0],d=e.querySelector(".rfvideostatus"),c=!!d&&!!d.getAttribute("data-show-status"),p=!!d&&!!d.getAttribute("data-show-title"),u=e.getElementsByTagName("li");let h="";if(c){const e=Joomla.Text._("MOD_RFVIDEO_LOADING").replace("&hellip;","…");h=Joomla.Text._("MOD_RFVIDEO_SEEKING").replace("&hellip;","…"),o.addEventListener("loadstart",(()=>{2===o.networkState&&setstatus(d,e)})),o.addEventListener("waiting",(()=>{2===o.networkState&&setstatus(d,e)})),o.addEventListener("canplay",(()=>{clearstatus(d,e)})),o.addEventListener("playing",(()=>{clearstatus(d,e)})),o.addEventListener("seeking",(()=>{setstatus(d,h)})),o.addEventListener("seeked",(()=>{clearstatus(d,h)}))}if(p){const e=[];for(let t=0;t<u.length;t+=1){const s=u[t].getElementsByTagName("a")[0],a={start:parseFloat(s.getAttribute("data-start")),title:s.innerHTML};e[t]=a,s.addEventListener("click",(()=>{seek(o,a.start)}))}e[u.length]={start:o.duration,title:""},o.addEventListener("durationchange",(()=>{e[u.length].start=o.duration})),o.addEventListener("timeupdate",(()=>{updchapter(o,d,e,h)}))}else for(let e=0;e<u.length;e+=1){const t=u[e].getElementsByTagName("a")[0];t.addEventListener("click",(()=>{seek(o,parseFloat(t.getAttribute("data-start")))}))}if(l){const e=[];for(let t=0;t<l.length;t+=1){const s=l.options[t].value.split(";"),a={height:s[0],width:s[1],totalhmax:s[2],totalwmax:s[3],plistwmin:s[4],image:s[5],sources:s.slice(6)};e[t]=a}l.addEventListener("change",(()=>{sourceSelectChanged(l,t,s,a,n,o,e,i,r)}))}}));